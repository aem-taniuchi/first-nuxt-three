(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{272:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return k}));var o=t(131),r=t(132),c=(t(19),t(260)),d=(t(267),t(263)),l=t(268),h=t(269),v=t(262);function w(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,o=Object(v.a)(e);if(n){var r=Object(v.a)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Object(h.a)(this,t)}}var f=new c.l(0,0,1),O=new c.b,m=new c.j,j=new c.j(-Math.sqrt(.5),0,0,Math.sqrt(.5)),y={type:"change"},E=function(e){Object(l.a)(t,e);var n=w(t);function t(object){var e;Object(o.a)(this,t),e=n.call(this),!1===window.isSecureContext&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");var r=Object(d.a)(e),l=new c.j;e.object=object,e.object.rotation.reorder("YXZ"),e.enabled=!0,e.deviceOrientation={},e.screenOrientation=0,e.alphaOffset=0;var h=function(e){r.deviceOrientation=e},v=function(){r.screenOrientation=window.orientation||0};return e.connect=function(){v(),void 0!==window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((function(e){"granted"==e&&(window.addEventListener("orientationchange",v),window.addEventListener("deviceorientation",h))})).catch((function(e){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)})):(window.addEventListener("orientationchange",v),window.addEventListener("deviceorientation",h)),r.enabled=!0},e.disconnect=function(){window.removeEventListener("orientationchange",v),window.removeEventListener("deviceorientation",h),r.enabled=!1},e.update=function(){if(!1!==r.enabled){var e=r.deviceOrientation;if(e){var n=e.alpha?c.d.degToRad(e.alpha)+r.alphaOffset:0,t=e.beta?c.d.degToRad(e.beta):0,o=e.gamma?c.d.degToRad(e.gamma):0,d=r.screenOrientation?c.d.degToRad(r.screenOrientation):0;!function(e,n,t,o,r){O.set(t,n,-o,"YXZ"),e.setFromEuler(O),e.multiply(j),e.multiply(m.setFromAxisAngle(f,-r))}(r.object.quaternion,n,t,o,d),8*(1-l.dot(r.object.quaternion))>1e-6&&(l.copy(r.object.quaternion),r.dispatchEvent(y))}}},e.dispose=function(){r.disconnect()},e.connect(),e}return Object(r.a)(t)}(c.c),k=function(){function e(n){var t=this;Object(o.a)(this,e),this.scene=null,this.camera=null,this.renderer=null,this.object=null,this.controls=null,this.size={windowW:null,windowH:null},this.rotationX=0,this.rotationY=0,this.props=n,this.checkDeviceOrien(this.props.$modal,this.props.$modal_button).then((function(){t.init(t.props.$canvas)})).catch((function(e){alert(e)}))}return Object(r.a)(e,[{key:"isIos",value:function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("iphone")>=0||e.indexOf("ipad")>=0||e.indexOf("ipod")>=0}},{key:"checkDeviceOrien",value:function(e,n){var t=this;return new Promise((function(o,r){t.isIos()||o("resolve");window.addEventListener("deviceorientation",(function n(){hideDeviceOrienModal(e),window.removeEventListener("deviceorientation",n,!1),o("resolve")}),!1);e.classList.remove("is-hidden"),n.addEventListener("click",(function(){DeviceMotionEvent&&DeviceMotionEvent.requestPermission&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((function(n){console.log(n),"granted"===n?(t.hideDeviceOrienModal(e),o("resolve")):(alert("モーションセンサーの使用が拒否されました。\nこのページを楽しむには、デバイスモーションセンサーの使用を許可する必要があります。\nSafariのアプリを再起動して、モーションセンサーの使用（「動作と方向」へのアクセス）を許可をしてください。"),r("resolve"))})):alert("モーションセンサーの使用が可能な端末からアクセスしてください。")}))}))}},{key:"hideDeviceOrienModal",value:function(e){e.classList.add("is-hidden")}},{key:"init",value:function(e){this.size={windowW:window.innerWidth,windowH:window.innerHeight},this.setScene(),this.setCamera(),this.setObject(),this.setRenderer(e)}},{key:"setScene",value:function(){this.scene=new c.k}},{key:"setCamera",value:function(){this.camera=new c.i(45,this.size.windowW/this.size.windowH,.1,30),this.camera.position.set(0,0,5),this.camera.lookAt(0,0,0),this.scene.add(this.camera),this.controls=new E(this.camera,!0)}},{key:"setObject",value:function(){var e=new c.a(1,1,1),n=new c.g;this.object=new c.e(e,n),this.object.position.set(0,0,0),this.scene.add(this.object)}},{key:"setRenderer",value:function(e){var n=this;this.renderer=new c.m({canvas:e}),this.renderer.setClearColor(255,1),this.renderer.setSize(this.size.windowW,this.size.windowH),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setAnimationLoop((function(){n.render()}))}},{key:"render",value:function(){this.object.rotation.x+=.01,this.object.rotation.y+=.01,this.controls.update(),this.renderer.render(this.scene,this.camera)}}]),e}()}}]);